记录一下读书笔记。

todo 继续记录

# 系统设计原则
## 高并发
1. 无状态 -> 水平拆分比较容易 方便水平扩展 配置中心
2. 系统的拆分 业务的拆分 按照功能进行拆分
3. 读写分离 mysql write read
4. mvc 设计模式

5. 多台服务器，ng 的负载均衡 自动注册 发现
6. mq 削峰 解藕 异步 -> 消息重复消费 消息丢失 问题/多订阅 比如用户被 标记 ，监听Kafka消息 
   达到指定次数失败之后 ，记录log，发送通知。
7. 高并发 保证数据的最终一致性。
8. 数据异构。订单表分库分表 查询user 订单数据。
9. 数据闭环。因为数据来源太多，导致 数据

## 高可用

### 降级
1. 降级 降级开关 读服务降级 读取 本地缓存 分布式缓存 
2. 业务降级 满足 最终一致性即可 业务降级 异步 请求
### 限流
1. 防止恶意请求 防止流量超过系统阈值
2. 恶意流量 打入到缓存
3. ng limit模块

### 业务设计原则
1. 防重提交 不同的支付渠道，需要在业务测记录支付记录。
2. 幂等设计 避免mq的重复提交和重复消费
3. 订单状态的转移  状态