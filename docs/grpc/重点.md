
1. 权限控制 预分配
2. 限流/ 爬坡缓慢达到水位线/  排队
3. 熔断 降级 重试

超时过小 ： 调用下游负载过高
超时过大 ： 自己完蛋 

## 隔离
1. 线程池隔离 -> 完全隔离 -> 成本高
2. 信号量隔离 -> 成本低

## 熔断降级
1. 失败阈值+ 耗时 -> fastfail -> halfopen

## 限流
1. qps -> 简单粗暴 -> 不能完全反应机器情况 /并发度限流 -> 统计耗时 + 并发
2. 单机/集群限流
3. 分布式限流
固定时间窗口 -> 临界值 第1s,2s 中间 突发流量
滑动时间窗口 -> 优化粒度
漏桶 -> 防止突发流量 -> 均速
令牌桶 -> 可以突发

